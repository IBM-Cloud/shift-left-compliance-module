---
inputs:
  - type: git
    branch: ${PIPELINE_REPO_BRANCH}
    service: ${PIPELINE_REPO}
    path: .tekton
triggers:
  - name: commit-push
    type: git
    eventListener: ${REPO_COMMIT_EVENT_LISTENER_NAME}
    service: ${GIT_REPO}
    branch: master
    events: { "push": true }
  - name: manual-run
    type: manual
    eventListener: ${REPO_COMMIT_EVENT_LISTENER_NAME}
    properties:
      - name: branch
        type: text
        value: tektonroar
  - name: cron-monitor
    type: timer
    eventListener: ${REPO_COMMIT_EVENT_LISTENER_NAME}
    cron: "30 1-23/2 * * *"
    timezone: "America/Chicago"
    properties:
      - name: branch
        type: text
        value: tektonroar
properties:
  - name: GIT_URL
    type: integration
    path: parameters.repo_url
    value: repo_cli_dev_plugin_test
  - name: MY_APP_NAME
    type: text
    value: ${APP_NAME}
  - name: TEST_DATA
    type: text
    value: ${TEST_NAME}
  - name: api
    type: text
    value: ${API_URL}
  - name: apikey
    type: secure
    value: ${API_KEY}
  - name: appname-prefix
    type: text
    value: ${APPNAME_PREFIX}
  - name: art-apikey
    type: secure
    value: ${ART_API_KEY}
  - name: cluster
    type: text
    value: ${CLUSTER_NAME}
  - name: cr-namespace
    type: text
    value: ${CR_NAMESPACE}
  - name: gitlab-token
    type: secure
    value: ${GITLAB_TOKEN}
  - name: gitlab-user
    type: text
    value: ${GITLAB_USER}
  - name: logs-dir
    type: text
    value: ${LOGS_DIR}
  - name: org
    type: text
    value: ${ORG}
  - name: passphrase
    type: text
    value: ${PASSPHRASE}
  - name: personal-yaas
    type: text
    value: ${PERSONAL_YAAS}
  - name: pipeline-dockerconfigjson
    type: secure
    value: ${PIPELINE_DOCKERCONFIGJSON}
  - name: pipeline-debug
    type: single_select
    value:
      "0": true
      "1": false
  - name: region
    type: text
    value: ${REGION}
  - name: repository
    type: integration
    path: parameters.repo_url
    value: repo_cli_dev_plugin_test
  - name: resource-group
    type: text
    value: ${RESOURCE_GROUP}
  - name: revision
    type: text
    value: ${REVISION}
  - name: slack-url
    type: secure
    value: ${SLACK_URL}
  - name: space
    type: text
    value: ${SPACE}
  - name: test-dir
    type: text
    value: ${TEST_DIR}
settings:
  #slackEnabled: true
